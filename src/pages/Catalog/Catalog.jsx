import React from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { Link } from 'react-router-dom';
import { setCatalogFromLocalStorage } from '../../store/games/gameSlice';

//Styles
import classes from './Catalog.module.scss';
import CatalogItem from './CatalogItem/CatalogItem';

const Catalog = () => {
	const dispatch = useDispatch();
	const { catalog } = useSelector(state => state.game);

	React.useEffect(() => {
		if (catalog.length !== 0) {
			localStorage.setItem('catalog', JSON.stringify(catalog));
		}

		if (localStorage.getItem('catalog')) {
			const arr = JSON.parse(localStorage.getItem('catalog'));
			dispatch(setCatalogFromLocalStorage(arr));
		}
	}, []);

	if (catalog.length === 0) {
		return (
			<div className={classes.notFound}>
				<svg
					enableBackground='new 0 0 64 64'
					version='1.1'
					viewBox='0 0 64 64'
					width='100px'
					space='preserve'
					xmlns='http://www.w3.org/2000/svg'
					xlink='http://www.w3.org/1999/xlink'>
					<path
						d='M63.924,48.732c0.012-0.7-0.016-1.409-0.081-2.134c-0.746-12.019-6.299-17.172-6.299-17.172l-0.003,0.001  c-1.905-1.966-4.571-3.194-7.529-3.194c-1.612,0-3.127,0.386-4.489,1.041l-0.02-0.011c0,0-0.149,0.083-0.396,0.217  c-0.096,0.051-0.199,0.09-0.294,0.146l-0.005-0.001c0,0-0.011,0.008-0.014,0.009c-0.021,0.012-0.04,0.026-0.061,0.04  c-1.172,0.599-3.575,1.705-6.291,2.318c-1.879,0.449-2.06-1.073-2.07-1.48v-0.777c-0.068-0.833-0.502-2.378-2.688-2.721v-9.688  c0.003,0.001,0.005,0.003,0.008,0.003l0.011-3.382c0,0-0.241-3.188,1.154-4.458c0.045-0.045,0.086-0.091,0.131-0.132  c0.019-0.016,0.031-0.037,0.05-0.049c0.01-0.006,0.018-0.006,0.024-0.013c0.927-0.807,2.125-0.938,2.834-0.935  c0.186,0.009,3.271,0.245,3.271,4.506v5.912h0.009c0.05,3.174,2.628,5.732,5.813,5.732c2.759,0,5.029-1.932,5.624-4.509  c0.01-0.025,0.022-0.034,0.031-0.062c0.13-0.396,0.14-0.706,0.118-0.973c0-0.004,0.003-0.009,0.003-0.015  c0-0.016-0.01-0.031-0.01-0.048c-0.021-0.167-0.043-0.305-0.083-0.412c-0.016-0.039-0.025-0.074-0.044-0.11  c-0.053-0.115-0.099-0.192-0.099-0.192l-0.021,0.012c-0.244-0.361-0.638-0.613-1.106-0.613c-0.637,0-1.134,0.451-1.281,1.041  c-0.014,0.045-0.034,0.098-0.053,0.149h-0.015c0,0,0.001,0.028,0.001,0.04c-0.23,0.647-0.678,1.719-1.209,2.01  c-0.582,0.411-1.494,0.814-2.482,0.334c-1.164-0.632-1.976-1.832-1.976-3.251c0-0.103,0.021-0.197,0.029-0.297h-0.029v-4.108V8.824  V8.552c0-1.17-0.667-2.356-1.177-3.095c-0.021-0.033-0.045-0.065-0.068-0.098c-0.103-0.144-0.198-0.275-0.275-0.375h-0.032  c-1.29-1.617-3.254-2.676-5.483-2.676c-3.091,0-5.682,2.005-6.621,4.778c-0.172,0.667-0.415,2.242-0.415,5.825v12.05  c-2.408,0.137-2.674,2.092-2.688,2.778v0.622c-0.046,0.737-0.423,2.202-2.708,1.564c-2.31-0.582-4.208-1.543-5.114-2.059  c-0.135-0.087-0.274-0.165-0.414-0.245c-0.105-0.065-0.17-0.105-0.17-0.105v0.009c-1.483-0.816-3.18-1.293-4.997-1.293  c-2.222,0-4.281,0.695-5.977,1.875l-0.004-0.003c0,0-0.201,0.136-0.516,0.392c-0.63,0.499-1.202,1.067-1.704,1.694  c-2.095,2.429-5,7.234-5.735,15.528c-0.204,1.338-0.255,2.65-0.187,3.92c0,0.05-0.005,0.097-0.005,0.146c0.003,0,0.008,0,0.011,0  c0.334,5.497,3.117,10.081,7.566,11.483c3.89,1.224,8.123-0.281,11.414-3.567l-0.003,0.009c0,0,0.033-0.037,0.082-0.093  c0.144-0.143,0.287-0.288,0.426-0.439c0.867-0.861,2.812-2.58,5.514-3.766c0.096-0.04,0.217-0.09,0.372-0.146  c0.025-0.013,0.053-0.019,0.078-0.031c1.867-0.682,7.297-2.18,13.646,0.468c2.805,1.301,4.977,3.065,5.915,3.898  c0.005,0.007,0.011,0.01,0.016,0.016c0.317,0.282,0.502,0.462,0.502,0.462l-0.007-0.037c3.176,2.818,7.08,4.066,10.697,2.927  c4.618-1.456,7.442-6.334,7.594-12.109c0.003-0.003,0.007-0.006,0.01-0.006C63.927,48.81,63.924,48.772,63.924,48.732z   M20.307,43.33c0.056,1.459-1.154,1.714-1.773,1.751h-0.68c-1.132-0.006-1.345,0.776-1.379,1.229v0.812  c0,1.479-0.986,1.752-1.53,1.791h-0.782c-1.334,0-1.446-1.256-1.454-1.587v-1.047c-0.015-1.1-1.014-1.192-1.294-1.197h-0.422  c-1.717,0.013-2.06-0.908-2.114-1.466v-0.418c0.014-1.711,1.494-1.874,1.976-1.882h0.534c1.089-0.006,1.292-0.703,1.321-1.093  v-0.956c0-1.621,1.428-1.774,1.893-1.783c0.056-0.002,1.874-0.021,1.874,1.809v0.838c0.012,0.34,0.155,1.199,1.33,1.186h0.635  c0.519,0.016,1.868,0.209,1.868,1.882V43.33z'
						fill='#f5f5f5'
					/>
				</svg>
				<h1>NO GAMES FOUND</h1>
				<div>
					<p>You can add game from page</p>
					<Link to='/games'>GAMES</Link>
				</div>
			</div>
		);
	}

	return (
		<div className={classes.content}>
			<div className={classes.logo}>
				<svg
					enableBackground='new 0 0 64 64'
					height='64px'
					id='Icons'
					version='1.1'
					viewBox='0 0 64 64'
					space='preserve'
					xmlns='http://www.w3.org/2000/svg'
					xlink='http://www.w3.org/1999/xlink'>
					<g id='cloud'>
						<g>
							<path
								d='M52,46.5c-0.662,0-1.31-0.189-1.873-0.549l-1.514-0.966l-1.671,0.667C45.601,46.191,43.799,46.5,42,46.5    c-1.949,0-3.861-0.357-5.246-0.98l-1.241-0.556l-1.292,0.428c-4.384,1.453-10.075,1.452-14.475-0.011l-1.529-0.511l-1.385,0.835    C15.97,46.225,14.99,46.5,14,46.5v-1c0.809,0,1.609-0.226,2.316-0.651l1.779-1.072l1.967,0.655    c4.197,1.396,9.662,1.397,13.844,0.011l1.661-0.549l1.596,0.714C38.425,45.175,40.188,45.5,42,45.5    c1.676,0,3.342-0.282,4.57-0.775l2.148-0.858l1.947,1.242C51.067,45.364,51.529,45.5,52,45.5c1.379,0,2.5-1.121,2.5-2.5    c0-1.352-1.061-2.446-2.415-2.491l-1.415-0.047l0.033-1l1.415,0.047C54.015,39.573,55.5,41.106,55.5,43    C55.5,44.93,53.93,46.5,52,46.5z'
								fill='#f5f5f5'
							/>
						</g>
						<g>
							<path
								d='M25,15c4.931,0,9.303,2.964,11.137,7.55l0.405,1.013l0.974-0.49C38.928,22.36,40.437,22,42,22    c5.514,0,10,4.486,10,10c0,1.242-0.234,2.469-0.696,3.646l-0.518,1.317l1.415,0.047C55.453,37.119,58,39.75,58,43    c0,3.309-2.691,6-6,6c-1.139,0-2.251-0.325-3.216-0.941l-0.434-0.276l-0.477,0.19C46.222,48.636,44.136,49,42,49    c-2.324,0-4.55-0.426-6.268-1.198l-0.355-0.159l-0.369,0.122C32.568,48.573,29.8,49,27,49c-2.811,0-5.592-0.432-8.044-1.248    l-0.437-0.146l-0.396,0.238C16.871,48.601,15.444,49,14,49c-4.411,0-8-3.589-8-8c0-4.092,3.064-7.509,7.127-7.95l1.337-0.146    l-0.523-1.237C13.316,30.188,13,28.619,13,27C13,20.383,18.383,15,25,15 M25,14c-7.18,0-13,5.82-13,13    c0,1.793,0.363,3.502,1.02,5.056C8.512,32.545,5,36.361,5,41c0,4.971,4.029,9,9,9c1.699,0,3.283-0.48,4.641-1.299    C21.11,49.523,23.959,50,27,50c3.025,0,5.861-0.471,8.322-1.286C37.094,49.511,39.43,50,42,50c2.364,0,4.533-0.412,6.246-1.099    C49.331,49.594,50.617,50,52,50c3.865,0,7-3.135,7-7c0-3.787-3.01-6.863-6.766-6.988C52.723,34.768,53,33.418,53,32    c0-6.076-4.924-11-11-11c-1.776,0-3.449,0.431-4.935,1.179C35.149,17.389,30.475,14,25,14L25,14z'
								fill='#f5f5f5'
							/>
						</g>
					</g>
				</svg>
				<h1>Catalog</h1>
			</div>

			<div className={classes.listCatalog}>
				{catalog.map(item => {
					return <CatalogItem key={item.id} {...item} />;
				})}
			</div>
		</div>
	);
};

export default Catalog;
